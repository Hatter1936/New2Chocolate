<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Шоколенд - Админ-панель</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    
</head>
<body>
    <header>
        <div class="container">
            <div class="header-top">
                <a href="index.html" class="logo">
                    Chocolate
                </a>
                <nav class="nav-main">
                    <ul>
                        <li><a href="index.html">Главная</a></li>
                        <li><a href="catalog.html">Фигуры</a></li>
                        <li><a href="about.html">О нас</a></li>
                        <li><a href="order.html">Заказать</a></li>
                        <li><a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
                    </ul>
                </nav>
                <div class="header-icons">
                    <a href="login.html">Выход</a>
                </div>
                <button class="hamburger" aria-label="Меню">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section class="order-section">
            <div class="container">
                <div class="admin-header">
                    <h2 class="section-title">Админ-панель</h2>
                    <button class="add-product-btn" id="addProductBtn">
                        <i class="fas fa-plus"></i>
                        Добавить фигурку
                    </button>
                </div>
                
                <div class="table-responsive">
                    <table class="admin-table" id="productsTable">
                        <colgroup>
                            <col>
                            <col style="width: 250px">
                            <col style="width: 400px">
                            <col style="width: 700px">
                            <col style="width: 150px">
                            <col style="width: 200px">
                        </colgroup>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Картинка</th>
                                <th>Название</th>
                                <th>Описание</th>
                                <th>Цена</th>
                                <th>Категория</th>
                                <th>Действия</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Данные загружаются из JSON -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Модальное окно для добавления/редактирования -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Добавить фигурку</h3>
                <button class="modal-close" onclick="Admin.closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form class="modal-form" id="productForm">
                <input type="hidden" id="productId" value="">
                
                <div class="form-group">
                    <label for="productImage">Картинка</label>
                    <input type="file" id="productImage" accept="image/*">
                    <small>Выберите файл...</small>
                </div>
                
                <div class="form-group">
                    <label for="productName">Название</label>
                    <input type="text" id="productName" placeholder="Например: Фигурка зайца" required>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">Описание</label>
                    <textarea id="productDescription" placeholder="Описание шоколадной фигурки..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="productPrice">Цена (₽)</label>
                    <input type="number" id="productPrice" min="0" step="1" placeholder="3000" required>
                </div>
                
                <div class="form-group">
                    <label for="productCategory">Категория</label>
                    <select id="productCategory" required>
                        <option value="">Выберите категорию</option>
                        <option value="Молочный">Молочный</option>
                        <option value="Горький">Горький</option>
                        <option value="Белый">Белый</option>
                        <option value="Рубиновый">Рубиновый</option>
                        <option value="Цветной">Цветной</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="Admin.closeModal()">Отмена</button>
                    <button type="submit" class="btn-submit">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Уведомление -->
    <div class="notification" id="notification"></div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Магазин</h3>
                    <ul>
                        <li><a href="index.html">Главная</a></li>
                        <li><a href="catalog.html">Фигуры</a></li>
                        <li><a href="about.html">О нас</a></li>
                        <li><a href="order.html">Заказать</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Контакты</h3>
                    <ul>
                        <li> г. Ростов-на-Дону</li>
                        <li>8‒800‒555‒35‒35</li>
                        <li>aminkarasik@choco.ru</li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Часы работы</h3>
                    <ul>
                        <li>Пн-Пт: Круглосуточно</li>
                        <li>Сб-Вс: Круглосуточно</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>© 2025 Chocolate. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script src="js/admin/products.js"></script>
    <script src="js/admin/ui.js"></script>
    <script src="js/admin/main.js"></script>
    <script src="js/modules/auth.js"></script>
    <script src="js/modules/auth-ui.js"></script>
    <script>
    (function() {
        const token = localStorage.getItem('access_token');
        if (!token) {
            window.location.href = 'login.html?redirect=cart.html';
        }
    })();
</script>
</body>
</html>